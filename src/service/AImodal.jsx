import { GoogleGenerativeAI } from "@google/generative-ai";


// const {
//     GoogleGenerativeAI,
//     HarmCategory,
//     HarmBlockThreshold,
// } = require("@google/generative-ai");

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};


export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                {
                    text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image URL, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image URL, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
                },
            ],
        },
        {
            role: "model",
            parts: [
                {
                    text: "```json\n{\n  \"tripName\": \"Budget-Friendly Las Vegas Getaway\",\n  \"travelers\": \"Couple\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40- $80 per night\",\n       \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/34/a3/8d/circus-circus-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1276,\n        \"longitude\": -115.1679\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic, family-friendly option on the Strip with affordable rooms, a circus midway, and free circus acts.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$45 - $90 per night\",\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/14/a6/a2/6f/exterior-view.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0982,\n        \"longitude\": -115.1726\n      },\n      \"rating\": 3.8,\n      \"description\": \"A castle-themed hotel on the Strip with budget-friendly rooms and a lively atmosphere.\"\n    },\n      {\n      \"hotelName\": \"OYO Hotel & Casino Las Vegas\",\n      \"hotelAddress\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n      \"price\":\"$35 - $75 per night\",\n        \"hotelImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/a4/14/d2/oyo-hotel-casino-las-vegas.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1001,\n        \"longitude\": -115.1694\n      },\n      \"rating\": 3.3,\n        \"description\": \"Located off the strip, but still within walking distance, this is a very budget friendly option with pool and casino.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip\",\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A stunning indoor garden with elaborate displays that change seasonally. Free to enter.\",\n          \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/1c/e6/30/bellagio-conservatory.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1756\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.8,\n          \"travelTime\": \"Depends on Hotel Location\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"A mesmerizing water show with music and lights, located in front of the Bellagio Hotel. Free to watch.\",\n         \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/a7/04/8c/fountains-of-bellagio.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1757\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"travelTime\": \"Walking distance from the Conservatory.\"\n        },\n           {\n            \"placeName\": \"The LINQ Promenade\",\n            \"placeDetails\": \"An outdoor shopping, dining, and entertainment district.  It's fun just to walk through, window shop and watch people. There are usually street performers and other free entertainment.\",\n             \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/d8/c1/54/linq-promenade-at-night.jpg?w=700&h=-1&s=1\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1173,\n              \"longitude\": -115.1696\n            },\n            \"ticketPricing\": \"Free\",\n             \"rating\": 4.5,\n            \"travelTime\": \"Walking distance from Bellagio.\"\n          },\n          {\n           \"placeName\": \"Volcano at the Mirage\",\n           \"placeDetails\": \"A free nightly spectacle of fire and water, set to music and sound effects.\",\n             \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/b8/8d/07/volcano.jpg?w=700&h=-1&s=1\",\n           \"geoCoordinates\": {\n              \"latitude\": 36.1212,\n              \"longitude\": -115.1725\n            },\n            \"ticketPricing\": \"Free\",\n             \"rating\": 4.6,\n             \"travelTime\": \"Walking distance from The LINQ Promenade.\"\n          }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Afternoon/Evening\",\n      \"places\": [\n       {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a giant video screen canopy, offering free light shows and live music. Explore the vintage casinos of old Las Vegas.\",\n            \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/87/ca/59/fremont-street-experience.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1418\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n            \"travelTime\": \"Approx. 15-20 minutes by rideshare from the Strip.\"\n        },\n         {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"An open-air shopping and entertainment center built from repurposed shipping containers. It often hosts free events and has a playground for kids.\",\n           \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/9a/c0/2a/container-park.jpg?w=700&h=-1&s=1\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1671,\n            \"longitude\": -115.1384\n          },\n          \"ticketPricing\": \"Free (may have fees for attractions)\",\n          \"rating\": 4.4,\n             \"travelTime\": \"Walking distance from Fremont Street.\"\n        },\n          {\n           \"placeName\": \"Downtown Murals\",\n           \"placeDetails\": \"Explore the vibrant street art and murals scattered throughout downtown Las Vegas.\",\n              \"placeImageURL\":\"https://www.lasvegasnevada.gov/getattachment/893f8b4c-2e88-41b6-94d6-a8405451031b/downtown-mural-gallery.aspx?lang=en-US\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1646,\n              \"longitude\": -115.1418\n            },\n            \"ticketPricing\": \"Free\",\n             \"rating\": 4.3,\n             \"travelTime\": \"Walking distance from Container Park.\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Relaxation & Departure\",\n      \"bestTimeToVisit\": \"Morning/Afternoon\",\n      \"places\": [\n      {\n        \"placeName\": \"Pool Time (Hotel)\",\n         \"placeDetails\": \"Enjoy some time relaxing by your hotel's pool, a great way to unwind and soak up the sun.\",\n          \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/1c/54/a7/62/pool.jpg?w=700&h=-1&s=1\",\n        \"geoCoordinates\": {\n          \"latitude\": \"check your hotel location\",\n          \"longitude\": \"check your hotel location\"\n        },\n        \"ticketPricing\": \"Free (Included with Hotel)\",\n        \"rating\": 4,\n         \"travelTime\": \"Right at your hotel!\"\n\n      },\n         {\n           \"placeName\":\"Ethel M Chocolate Factory & Botanical Cactus Garden\",\n          \"placeDetails\": \"Take a free tour of the chocolate factory and then explore the beautiful botanical cactus garden. A great place for a relaxing stroll and take some pictures.\",\n           \"placeImageURL\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/13/4d/a4/6c/ethel-m-chocolates.jpg?w=700&h=-1&s=1\",\n           \"geoCoordinates\": {\n             \"latitude\": 36.0459,\n             \"longitude\": -115.0940\n           },\n           \"ticketPricing\":\"Free\",\n           \"rating\": 4.4,\n            \"travelTime\": \"Approx. 15-20 minutes by rideshare from the Strip.\"\n         },\n         {\n           \"placeName\": \"Departure\",\n            \"placeDetails\": \"Head to the airport for your flight home. If time allows, you might be able to squeeze in one last walk down the strip before going to the airport.\",\n             \"placeImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/10/78/41/6f/exterior-building.jpg?w=700&h=-1&s=1\",\n            \"geoCoordinates\": {\n              \"latitude\": \"check your airport location\",\n              \"longitude\": \"check your airport location\"\n            },\n            \"ticketPricing\": \"Transportation fees\",\n            \"rating\": \"N/A\",\n            \"travelTime\": \"Depends on airport location\"\n         }\n\n      ]\n    }\n  }\n}\n```\n** Notes:**\n *   ** Prices:** Hotel prices are estimates and can vary widely depending on the season, day of the week, and any special events.\n *   ** Transportation:** This itinerary focuses on walking and some rideshare.Consider using public transportation like the Deuce bus if needed to save more money.\n*   ** Food:** To stay on budget, consider buying snacks at grocery stores and having some meals at more affordable restaurants or fast food places.\n *   ** Flexibility:** Feel free to adjust the itinerary based on your interests and what you feel like doing each day.\n *   ** Check for free events:** Las Vegas often has free shows and events, especially on weekends.Check local listings before your trip.\n\nEnjoy your budget- friendly trip to Las Vegas! Let me know if you have any other questions.\n",
                },
            ],
        },
    ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());


// run();
